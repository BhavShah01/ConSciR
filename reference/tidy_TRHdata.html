<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Tidy and Process Temperature and Relative Humidity data — tidy_TRHdata • ConSciR</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tidy and Process Temperature and Relative Humidity data — tidy_TRHdata"><meta name="description" content='This function tidies and processes temperature, relative humidity, and date data
from a given dataset. Dataset should minimally have "Date", "Temp" and "RH" columns.
It filters out rows with missing dates, attempts to parse dates,
converts temperature and humidity to numeric types, and groups the data by Site,
Sensor, and Date based on the averaging interval.
If the site or sensor columns are not present in the data, the function
defaults to adding columns named "Site" and "Sensor".
This can be changed in the arguments.
When an averaging option of "hour", "day", "month" is selected,
it uses dplyr and lubridate functions to floor datetimes and calculate averages,
the default is median average.
See lubridate::floor_date() for rounding intervals.

Filters out rows with missing dates.
Renames columns for consistency.
Converts temperature and relative humidity to numeric.
Adds default columns "Site" and "Sensor" when missing or not supplied in args.
Rounds dates down to the nearest hour, day, or month as per avg_time.
Calculates averages for temperature and relative humidity according to avg_statistic.
Filters out implausible temperature and humidity values (outside -50-80°C and 0-100%RH).

'><meta property="og:description" content='This function tidies and processes temperature, relative humidity, and date data
from a given dataset. Dataset should minimally have "Date", "Temp" and "RH" columns.
It filters out rows with missing dates, attempts to parse dates,
converts temperature and humidity to numeric types, and groups the data by Site,
Sensor, and Date based on the averaging interval.
If the site or sensor columns are not present in the data, the function
defaults to adding columns named "Site" and "Sensor".
This can be changed in the arguments.
When an averaging option of "hour", "day", "month" is selected,
it uses dplyr and lubridate functions to floor datetimes and calculate averages,
the default is median average.
See lubridate::floor_date() for rounding intervals.

Filters out rows with missing dates.
Renames columns for consistency.
Converts temperature and relative humidity to numeric.
Adds default columns "Site" and "Sensor" when missing or not supplied in args.
Rounds dates down to the nearest hour, day, or month as per avg_time.
Calculates averages for temperature and relative humidity according to avg_statistic.
Filters out implausible temperature and humidity values (outside -50-80°C and 0-100%RH).

'><meta property="og:image" content="https://bhavshah01.github.io/ConSciR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ConSciR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ConSciR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ConSciR-FirstTimeR.html">Using R for the first time</a></li>
    <li><a class="dropdown-item" href="../articles/Conservation-tools.html">Conservation tools</a></li>
    <li><a class="dropdown-item" href="../articles/Humidity-functions.html">Humidity functions</a></li>
    <li><a class="dropdown-item" href="../articles/Sustainability.html">Sustainability</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BhavShah01/ConSciR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Tidy and Process Temperature and Relative Humidity data</h1>
      <small class="dont-index">Source: <a href="https://github.com/BhavShah01/ConSciR/blob/master/R/tidy_TRHdata.R" class="external-link"><code>R/tidy_TRHdata.R</code></a></small>
      <div class="d-none name"><code>tidy_TRHdata.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function tidies and processes temperature, relative humidity, and date data
from a given dataset. Dataset should minimally have "Date", "Temp" and "RH" columns.</p>
<p>It filters out rows with missing dates, attempts to parse dates,
converts temperature and humidity to numeric types, and groups the data by Site,
Sensor, and Date based on the averaging interval.</p>
<p>If the site or sensor columns are not present in the data, the function
defaults to adding columns named "Site" and "Sensor".
This can be changed in the arguments.</p>
<p>When an averaging option of "hour", "day", "month" is selected,
it uses <code>dplyr</code> and <code>lubridate</code> functions to floor datetimes and calculate averages,
the default is median average.
See <code><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">lubridate::floor_date()</a></code> for rounding intervals.</p>
<ul><li><p>Filters out rows with missing dates.</p></li>
<li><p>Renames columns for consistency.</p></li>
<li><p>Converts temperature and relative humidity to numeric.</p></li>
<li><p>Adds default columns "Site" and "Sensor" when missing or not supplied in args.</p></li>
<li><p>Rounds dates down to the nearest hour, day, or month as per <code>avg_time</code>.</p></li>
<li><p>Calculates averages for temperature and relative humidity according to <code>avg_statistic</code>.</p></li>
<li><p>Filters out implausible temperature and humidity values (outside -50-80°C and 0-100%RH).</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tidy_TRHdata</span><span class="op">(</span></span>
<span>  <span class="va">mydata</span>,</span>
<span>  Site <span class="op">=</span> <span class="st">"Site"</span>,</span>
<span>  Sensor <span class="op">=</span> <span class="st">"Sensor"</span>,</span>
<span>  Date <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>  Temp <span class="op">=</span> <span class="st">"Temp"</span>,</span>
<span>  RH <span class="op">=</span> <span class="st">"RH"</span>,</span>
<span>  avg_time <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  avg_statistic <span class="op">=</span> <span class="st">"median"</span>,</span>
<span>  avg_groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Site"</span>, <span class="st">"Sensor"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mydata">mydata<a class="anchor" aria-label="anchor" href="#arg-mydata"></a></dt>
<dd><p>A data frame containing TRH data. Ideally, this should have
columns for "Site", "Sensor", "Date", "Temp" (temperature), and "RH" (relative humidity).
The function requires at least the date, temperature, and relative humidity columns to be present.
Site and sensor columns are optional; if missing, the function will add default
columns named "Site" and "Sensor" respectively with values below.</p></dd>


<dt id="arg-site">Site<a class="anchor" aria-label="anchor" href="#arg-site"></a></dt>
<dd><p>A string specifying the name of the column in <code>mydata</code> that contains
location information. If missing, defaults to "Site".</p></dd>


<dt id="arg-sensor">Sensor<a class="anchor" aria-label="anchor" href="#arg-sensor"></a></dt>
<dd><p>A string specifying the name of the column in <code>mydata</code> that contains
sensor information. If missing, defaults to "Sensor".</p></dd>


<dt id="arg-date">Date<a class="anchor" aria-label="anchor" href="#arg-date"></a></dt>
<dd><p>A string specifying the name of the column in <code>mydata</code> that contains
date information. Default is "Date". The column should ideally contain ISO 8601
date-time formatted strings (e.g. "2025-01-01 00:00:00"), but the function will try to
parse a variety of common datetime formats.</p></dd>


<dt id="arg-temp">Temp<a class="anchor" aria-label="anchor" href="#arg-temp"></a></dt>
<dd><p>A string specifying the name of the column in <code>mydata</code> that contains
temperature data. Default is "Temp".</p></dd>


<dt id="arg-rh">RH<a class="anchor" aria-label="anchor" href="#arg-rh"></a></dt>
<dd><p>A string specifying the name of the column in <code>mydata</code> that contains
relative humidity data. Default is "RH".</p></dd>


<dt id="arg-avg-time">avg_time<a class="anchor" aria-label="anchor" href="#arg-avg-time"></a></dt>
<dd><p>Character string specifying the averaging interval.
One of "none" (no averaging), "hour", "day", or "month", etc.
See <code><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">lubridate::floor_date()</a></code> for rounding intervals.</p></dd>


<dt id="arg-avg-statistic">avg_statistic<a class="anchor" aria-label="anchor" href="#arg-avg-statistic"></a></dt>
<dd><p>Statistic for averaging; default is "median".</p></dd>


<dt id="arg-avg-groups">avg_groups<a class="anchor" aria-label="anchor" href="#arg-avg-groups"></a></dt>
<dd><p>Character vector specifying grouping columns for time-averaging.
These are then returned as factors. Default is c("Site", "Sensor").</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments (currently unused).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tidy data frame with processed TRH data. When averaging,
date times are floored, temperature and humidity are averaged,
groups are factored, and implausible values filtered.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># mydata file</span></span></span>
<span class="r-in"><span><span class="va">filepath</span> <span class="op">&lt;-</span> <span class="fu"><a href="data_file_path.html">data_file_path</a></span><span class="op">(</span><span class="st">"mydata.xlsx"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_excel</a></span><span class="op">(</span><span class="va">filepath</span>, sheet <span class="op">=</span> <span class="st">"mydata"</span>, n_max <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">tidy_TRHdata</span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 10 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Site   Sensor Date                 Temp    RH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> London Room 1 2024-01-01 <span style="color: #949494;">00:00:00</span>  21.8  36.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> London Room 1 2024-01-01 <span style="color: #949494;">00:15:00</span>  21.8  36.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> London Room 1 2024-01-01 <span style="color: #949494;">00:29:59</span>  21.8  36.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> London Room 1 2024-01-01 <span style="color: #949494;">00:44:59</span>  21.7  36.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> London Room 1 2024-01-01 <span style="color: #949494;">00:59:59</span>  21.7  36.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> London Room 1 2024-01-01 <span style="color: #949494;">01:14:59</span>  21.7  36.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> London Room 1 2024-01-01 <span style="color: #949494;">01:29:59</span>  21.7  36.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> London Room 1 2024-01-01 <span style="color: #949494;">01:44:59</span>  21.7  36.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> London Room 1 2024-01-01 <span style="color: #949494;">01:59:59</span>  21.7  36  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> London Room 1 2024-01-01 <span style="color: #949494;">02:14:59</span>  21.6  36  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">tidy_TRHdata</span><span class="op">(</span><span class="va">mydata</span>, avg_time <span class="op">=</span> <span class="st">"hour"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Date                Site   Sensor  Temp    RH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2024-01-01 <span style="color: #949494;">00:00:00</span> London Room 1  21.8  36.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2024-01-01 <span style="color: #949494;">01:00:00</span> London Room 1  21.7  36.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 2024-01-01 <span style="color: #949494;">02:00:00</span> London Room 1  21.6  36  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mydata</span> <span class="op">|&gt;</span> <span class="fu"><a href="add_humidity_calcs.html">add_humidity_calcs</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">tidy_TRHdata</span><span class="op">(</span>avg_time <span class="op">=</span> <span class="st">"hour"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Date                Site   Sensor  Temp    RH   Pws    Pw    DP    AH    AD</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2024-01-01 <span style="color: #949494;">00:00:00</span> London Room 1  21.8  36.6  26.1  9.56  6.30  7.01  1.19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2024-01-01 <span style="color: #949494;">01:00:00</span> London Room 1  21.7  36.2  26.0  9.41  6.08  6.91  1.19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 2024-01-01 <span style="color: #949494;">02:00:00</span> London Room 1  21.6  36    25.8  9.29  5.89  6.82  1.19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3 more variables: MR &lt;dbl&gt;, SH &lt;dbl&gt;, Enthalpy &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Example usage: TRH_data &lt;- tidy_TRHdata("path/to/your/TRHdata.csv")</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bhavesh Shah, Annelies Cosaert, Vincent Beltran.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

